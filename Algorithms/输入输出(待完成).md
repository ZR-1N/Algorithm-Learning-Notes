# 输入输出

##	基础知识

- `cin` 标准输入流（通常是键盘）
- `cout` 标准输出流（通常是屏幕）
- `cerr` 标准错误流（通常也是屏幕，无缓冲，用于立即输出错误信息）
- `>>`  流提取运算符，从流中读取数据，它会自动根据变量类型解析，并以空白符（空格，回车，制表符）作为间隔
- `<<` 流插入运算符，向流中写入数据

## 性能优化

### 解除同步/绑定

```cpp
ios::sync_with_stdio(false);//
```

关闭C++标准库的iostream流与C标准库的stdio流之间的同步。

默认情况下，C++的iostream（如`cin`和`cout`）与C的stdio（如`scanf`和`printf`）是同步的，以确保两者可以兼容。这种同步会带来性能开销，从而降低输入输出的速度。

当设置为`false`时，C++的iostream流将不再依赖于C的stdio流，各自拥有独立的缓冲区。可以显著提高输入输出的速度，使其接近于C风格的输入输出函数。

关闭同步后，不能在同一程序中混合使用iostream和stdio函数（`cin`/``cout`和`scanf`/`printf`），否则可能导致输入输出顺序错乱。

如果需要使用文件输入输出，应在调用`freopen()`之后再关闭同步。

```cpp
cin.tie(nullptr);
```

取消`cin`和`cout`之间的绑定关系。

默认情况下，`cin`和`cout`是绑定在一起的，这意味着每次从`cin`读取数据或向`cout`写入数据后，都会自动刷新`cout`的缓冲区。这种绑定虽然可以保证输出顺序的正确性，但也增加了额外的IO负担。

解除绑定后，`cout`只有在缓冲区满或程序结束时才会输出，减少了不必要的刷新操作。如果需要确保输出在输入之前显示，必须手动刷新`cout`缓冲区（例如使用`std::cout.flush();`）。

```cpp
cout.tie(nullptr)
```

虽然在大多数情况下，仅取消`cin`与`cout`的绑定即可显著提高性能，但有时也会看到取消`cout`与其他流的绑定。

实际上，由于默认情况下只有`cin`与`cout`是绑定的，单独取消`cout`的绑定并没有实际效果。

在实际编程中，通常只需要使用`cin.tie(nullptr);`即可达到优化效果。

取消所有绑定可以进一步减少潜在的同步开销，但在大多数情况下并不是必须的.

**总结**：

```cpp
ios::sync_with_stdio(false);
cin.tie(nullptr);//即可
```

可以显著提高C++程序的输入输出效率。这些优化技巧特别适用于需要快速处理大量数据的场景，如算法竞赛和高性能计算。然而，**在使用这些技巧时需要注意不要混合使用C和C++的输入输出函数，并且在必要时手动管理缓冲区刷新。**

### ‘\n’ & endl

‘\n’只输出一个换行符
endl输出一个换行符后会强制刷新缓冲器

在大量输出时，endl的强制刷新会造成巨大的性能损失。因此，算法竞赛中始终使用‘\n’。

## 处理各种输入输出

### 整行读取getline

当输入包含空格时（例如一个完整的句子），`cin>>`会以空格为界，所以需要使用`getline`

```c++
string str;
std::getline(std::cin,str);//读取一整行，直到遇到回车
```

### 循环读取（未知数量输入/End-of-File）

很多题目要求处理到没有输入为止（EOF），cin操作符在成功读取时返回true，失败（如到达文件末尾）时返回false，可以巧妙地用于while循环。

```c++
int a;
while(cin>>a)
{

}
```

